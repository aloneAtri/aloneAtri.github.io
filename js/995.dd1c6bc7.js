"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[995],{7995:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"music"}},[s("div",{attrs:{id:"title"}},[s("h1",{staticClass:"select2"},[t._v("MusicPlayer")]),s("ul",{attrs:{id:"head"}},[s("li",{staticClass:"select2"},[s("el-button",[t._v("播放列表")])],1),s("li",[s("el-button",{attrs:{id:"showInput"},nativeOn:{click:function(s){return t.showTheBtn.apply(null,arguments)}}},[t._v("显示输入框")])],1),t.showBtn?s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchListId,expression:"searchListId"}],attrs:{type:"text",id:"search",placeholder:"输入歌单的id"},domProps:{value:t.searchListId},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchMusicList.apply(null,arguments)},input:function(s){s.target.composing||(t.searchListId=s.target.value)}}})]):t._e(),s("li",{staticClass:"select2"},[s("el-button",{attrs:{icon:"el-icon-search"},nativeOn:{click:function(s){return t.searchMusicList.apply(null,arguments)}}},[t._v("歌单搜索")])],1),t.showBtn?s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",id:"search",placeholder:"输入歌名"},domProps:{value:t.search},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchMusic.apply(null,arguments)},input:function(s){s.target.composing||(t.search=s.target.value)}}})]):t._e(),s("li",{staticClass:"select2"},[s("el-button",{attrs:{id:"searchMusic",icon:"el-icon-search",placeholder:"输入歌名"},nativeOn:{click:function(s){return t.searchMusic.apply(null,arguments)}}},[t._v("歌曲搜索")])],1)])]),s("router-view",{attrs:{result:t.result,sendAsk:t.sendAsk}}),s("div",{attrs:{id:"load"}},[s("div",[s("span",[s("i",{staticClass:"el-icon-d-arrow-left select",on:{click:t.last}})]),s("span",[s("i",{staticClass:"el-icon-video-pause select",style:t.pauseStyle,on:{click:t.pause}})]),s("span",[s("i",{staticClass:"el-icon-video-play select",style:t.playStyle,on:{click:t.playMusic}})]),s("span",[s("i",{staticClass:"el-icon-d-arrow-right select",on:{click:t.next}})]),s("span",[s("i",{staticClass:"select",class:t.playBtn,staticStyle:{cursor:"pointer"},on:{click:t.changeStyle}})])]),s("div",{staticClass:"block"},[s("span",{staticClass:"demonstration"}),s("el-slider",{model:{value:t.load,callback:function(s){t.load=s},expression:"load"}})],1),s("div",[t._m(0),s("span",{staticClass:"demonstration1"}),s("el-slider",{staticStyle:{width:"65%","margin-right":"20px"},model:{value:t.sound,callback:function(s){t.sound=s},expression:"sound"}})],1),s("audio",{ref:"music",staticStyle:{display:"none"},attrs:{autoplay:"",controls:"",src:t.url},on:{timeupdate:t.timeupdate,ended:t.end}})]),s("div",{ref:"bg",attrs:{id:"bgImg"}}),s("div",{ref:"bg2",attrs:{id:"bgImg2"}})],1)},a=[function(){var t=this,s=t._self._c;return s("span",[s("i",{staticClass:"el-icon-bell select"})])}],l=e(196),r={data(){return{showBtn:!1,search:"",load:0,sound:100,result:[],isPlay:!1,sendAsk:!1,searchListId:"",pauseStyle:{},playStyle:{},playBtn:"el-icon-s-unfold",plyBtnNum:0}},computed:{isSearch(){return this.$store.state.isSearch},isList(){return this.$store.state.isList},id(){return this.$store.state.id},url(){return this.$store.state.url},idArray(){return this.$store.state.idArray},isPlayIndex(){return this.$store.state.isPlayIndex},imgUrl(){return this.$store.state.imgSrc}},methods:{changeStyle(){const t=["el-icon-s-unfold","el-icon-s-operation","el-icon-refresh"];this.plyBtnNum++,this.plyBtnNum>=3&&(this.plyBtnNum=0),this.playBtn=t[this.plyBtnNum]},showTheBtn(){this.showBtn=!this.showBtn},next(){this.end()},last(){this.$store.commit("CHAGESONGINDEX",this.isPlayIndex-1),this.$refs.music.play()},end(){switch(this.plyBtnNum+1){case 1:this.$store.commit("CHAGESONGINDEX",this.isPlayIndex+1);break;case 2:this.$store.commit("CHAGESONGINDEX",Math.floor(Math.random()*this.idArray.length));break;case 3:this.$store.commit("CHAGESONGINDEX",this.isPlayIndex),this.$refs.music.src="",this.$refs.music.src=this.url;break}setTimeout((()=>{this.$refs.music.play()}),1e3)},timeupdate(){this.load=this.$refs.music.currentTime},pause(){this.$refs.music.pause(),this.isPlay=!1,this.playStyle={color:"rgba(225, 225, 225, 0.6)"},this.pauseStyle={color:"white",transform:"scale(1.1)"}},playMusic(){this.$refs.music.play(),this.isPlay=!0,this.playStyle={color:"white",transform:"scale(1.1)"},this.pauseStyle={color:"rgba(225, 225, 225, 0.6)"}},searchMusicList(){this.sendAsk=!0,this.$store.commit("CHANGEISLIST",!0),this.$store.commit("CHANGEISSEARCH",!1),l.ZP.get(`https://api.yimian.xyz/msc/?type=playlist&id=${this.searchListId}`).then((t=>{console.log("发送成功"),console.log(t.data,typeof t.data);let s=[],e=[];for(let i=0;i<t.data.length;i++){const a=t.data[i];e[i]=a,s[i]=a.id}this.result=e,this.$store.commit("CHANGEIDARRAY",s)}),(t=>{console.log(t.data)}))},searchMusic(){this.$store.commit("CHANGEISLIST",!1),this.$store.commit("CHANGEISSEARCH",!0),this.sendAsk=!0,l.ZP.get(`https://music-api.heheda.top/search?keywords=${this.search}`).then((t=>{console.log("发送成功"),console.log(t.data),this.result=t.data.result.songs;let s=[];for(let e=0;e<t.data.result.songs.length;e++){const i=t.data.result.songs[e];s[e]=i.id}this.$store.commit("CHANGEIDARRAY",s)}),(t=>{console.log(t.data)}))}},beforeDestroy(){clearTimeout(this.timer)},beforeRouteEnter(t,s,e){e((t=>{t.$store.commit("CHANGEISLIST",!0),t.$store.commit("CHANGEISSEARCH",!1),l.ZP.get("https://api.yimian.xyz/msc/?type=playlist&id=2695791551").then((s=>{console.log("发送成功"),console.log(s.data,typeof s.data);let e=[],i=[];for(let t=0;t<s.data.length;t++){const a=s.data[t];i[t]=a,e[t]=a.id}t.result=i,t.$store.commit("CHANGEIDARRAY",e)}),(t=>{console.log(t.data)}))}))},mounted(){this.$bus.$on("ask",(t=>{this.sendAsk=!this.sendAsk,this.urlArray=t})),document.onkeydown=t=>{switch(t.keyCode){case 38:this.sound+=5;break;case 40:this.sound-=5;break;default:break}},document.onkeyup=t=>{switch(console.log("按下:"+t.key+"键:"+t.keyCode),t.keyCode){case 39:this.next(),this.isPlay=!0;break;case 37:this.last();break;case 32:this.isPlay?this.pause():this.playMusic();break;case 81:this.changeStyle();break;default:break}}},watch:{sound(){let t=this.$refs.music;t.volume=this.sound/100},isPlayIndex(){console.log("当前播放歌曲发生变化了"),l.ZP.get(`https://music.cyrilstudio.top/song/url?id=${this.idArray[this.isPlayIndex]}`).then((t=>{console.log(t.data),this.$store.commit("CHANGEURL",t.data.data[0].url)})),this.$store.commit("CHANGEID",this.idArray[this.isPlayIndex]),this.isSearch?this.$store.commit("CHANGEIMGURL",this.result[this.isPlayIndex].al.picUrl):this.$store.commit("CHANGEIMGURL",this.result[this.isPlayIndex].cover),this.$nextTick((()=>{this.$refs.bg.style="background-image:url("+this.imgUrl+");filter: blur(15px);"}))},imgUrl(){this.$nextTick((()=>{this.$refs.bg.style="background-image:url("+this.imgUrl+");filter: blur(15px);"}))}}},o=r,n=e(1001),c=(0,n.Z)(o,i,a,!1,null,"3f9672a0",null),h=c.exports}}]);
//# sourceMappingURL=995.dd1c6bc7.js.map